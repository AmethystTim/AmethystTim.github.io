## 基本概念

- 指令系统（指令集，IS：Instruction Set）
- **指令集系统架构**（ISA）
    - 简称架构，也可以称为：处理器架构、指令集体系结构
    - 包含了程序员正确编写二进制机器语言程序所需的全部信息
    - 例如：如何使用硬件、指令格式、操作种类、操作数所能存放的寄存器组和结构，包括每个寄存器名称、编号、长度、用途
- 系列机
    - 基本指令系统相同，基本系统结构相同的计算机
    - 实际是为了解决**软件兼容**的问题，给定一个ISA，可以有不同的实现方式；例如：AMD/Intel CPU都是X86-64指令集，ARM ISA也有不同的实现方式
    - IBM 360是第一个将**ISA与其实现分离**的系列机

## 指令集架构

- ISA——抽象层，软件子系统与硬件子系统的桥梁和接口

![img](https://github.com/DINOREXNB/DINOREXNB.github.io/blob/main/docs/images/jz4-1.png?raw=true){width=600}

$$
ISA功能\quad\begin{cases}
数据类型\\存储模型\\软件可见的处理器状态\\指令集\\系统模型\\外部接口\\\dots
\end{cases}
\quad ISA特性\quad\begin{cases}
    成本和资源占用低\\简洁性：指令规整简洁\\架构和具体实现分离\\可扩展\\易于编程\\性能好\\\dots
\end{cases}
$$

## ISA位宽

指的是**通用寄存器的宽度**，决定了**寻址范围的大小**，数据运算能力的强弱

ISA位宽和指令编码长度**不一定相等**，在64位架构中，也存在大量的16位编码

## 存储器寻址

指的是：**处理器根据指令中给出的地址信息来寻找物理地址**

- 1980年以来几乎所有的机器的存储器都是按字节编址
- 一个存储器地址可以访问
    - 1个字节，2个字节，4个字节……
- 不同体系结构对字的定义是不同的
    - 16位字(Intel X86)，32位字(MIPS，RISC-V)
- 如何将字节地址映射到字地址（尾端问题）
- 一个字是否可以存放在任何字节边界上（对齐问题）

### 尾端问题

指的是：在一个（双）字内部的字节顺序问题

例如：地址`addr`存储的字为`0x89ABCDEF`，`addr`，`addr+1`，`addr+2`，`addr+4`四个字节分别存放的数据是什么？

||addr+3|addr+2|addr+1|addr|
|-|-|-|-|-|
|小端|89|AB|CD|EF|
|大端|EF|CD|AB|89|

### 对齐问题

- 假设对s个字节长的对象访问地址为A，如果A mod s=0 ，称为**边界对齐**
- 边界对齐的原因是存储器本身读写的要求，存储器本身读写通常就是边界对齐的，对于没有边界对齐的对象的访问，可能会导致两次访问或异常

## 寻址方式

指的是：通过指令中的操作数（不同方式）计算出地址

有效地址：由寻址方式说明的某一存储单元的实际存储器地址，有效地址

## 操作数类型、表示

面向应用、软件系统所处理的各种数据类型

类型由**操作码决定**或~~数据附加硬件解释的标记~~（现已弃用）

- 操作数在机器中的表示
    - 整型：原码、反码、补码、移码
    - 浮点：IEEE 754标准
    - 十进制：BCD码（二进制十进制表示）
    - ASCII character = 1 byte (64位寄存器能存8个ASCII字符)
    - ……
